"use strict";function versioncompare(e,t){var a,n;return a=e.toLowerCase(),n=t.toLowerCase(),a=a.replace(/^\D+/,""),n=n.replace(/^\D+/,""),a==n?0:a&&n?versionsort([a,n])[0]==a?-1:1:0}function versionsort(e,t){var a={ignore_stages:!1,nested:!1};if(t&&(a.ignore_stages=t.ignore_stages||a.ignore_stages,a.nested=t.nested||a.nested),a.nested){var n=e;e=[],n.forEach(function(t){e.push(t[a.nested])})}var s=/^([\d+\.]+)(([a-z]*)(\d*))$/,r={number:[],stage:[],stageName:[],stageNumber:[]},u={number:[],sequence:[],stage:[],stageName:[],stageNumber:[]},g={number:0,sequence:0,stageName:0,stageNumber:0},o=[];e.forEach(function(e){var t=composeVersion(e,s);o.push(t),r.number.push(t.number),r.stage.push(t.stage),r.stageName.push(t.stageName),r.stageNumber.push(t.stageNumber)}),o.forEach(function(e){e.number.split(".").forEach(function(e){u.number.push(parseInt(e))}),u.sequence.push(e.number.split(".").length),null===e.stageName?u.stageName.push(""):u.stageName.push(e.stageName),null===e.stageNumber?u.stageNumber.push(0):u.stageNumber.push(parseInt(e.stageNumber))}),u.stageName=_.union(u.stageName),u.stageName.sort(function(e,t){return e.localeCompare(t)}),u.stageName[0]=null,u.stageName.push(""),g.number=_.max(u.number).toString().length,g.sequence=_.max(u.sequence),g.stageName=u.stageName.length.toString().length,g.stageNumber=_.max(u.stageNumber).toString().length;var m=[];o.forEach(function(t,s){if(!a.ignore_stages||!t.stageName){var r="",o=t.number.split("."),i=new Array(g.sequence-o.length+1).join("."),c=t.number+i;c.split(".").forEach(function(e){r+=new Array(g.number-e.length+1).join("0"),r+=e});var N=t.stageName||"",h=_.indexOf(u.stageName,N),l=h.toString().length,b=new Array(g.stageName-l+1).join("0");r+=b+h;var p=u.stageNumber[s].toString().length,f=new Array(g.stageNumber-p+1).join("0");r+=f+u.stageNumber[s].toString(),r=parseInt(r);var v=e[s],d={index:v,calc:r};a.nested&&(d.object=n[s]),m.push(d)}}),m.sort(function(e,t){return t.calc-e.calc});var i=[];return m.forEach(function(e){return a.nested?void i.push(e.object):void i.push(e.index)}),i.reverse()}function composeVersion(e,t){var a=t.exec(e);return{number:a[1],stage:a[2]||null,stageName:a[3]||null,stageNumber:a[4]||null}}